{
  "Resources": {
    "VenuesTable2F048723": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "AttributeDefinitions": [
          {
            "AttributeName": "venueId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "createdAt",
            "AttributeType": "S"
          },
          {
            "AttributeName": "city",
            "AttributeType": "S"
          },
          {
            "AttributeName": "venueName",
            "AttributeType": "S"
          },
          {
            "AttributeName": "ownerId",
            "AttributeType": "S"
          }
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "LocationIndex",
            "KeySchema": [
              {
                "AttributeName": "city",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "venueName",
                "KeyType": "RANGE"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          },
          {
            "IndexName": "OwnerIndex",
            "KeySchema": [
              {
                "AttributeName": "ownerId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "venueId",
                "KeyType": "RANGE"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "venueId",
            "KeyType": "HASH"
          },
          {
            "AttributeName": "createdAt",
            "KeyType": "RANGE"
          }
        ],
        "PointInTimeRecoverySpecification": {
          "PointInTimeRecoveryEnabled": true
        },
        "TableName": "dojopool-venues"
      },
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete",
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenuesTable/Resource"
      }
    },
    "UsersTable9725E9C8": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "AttributeDefinitions": [
          {
            "AttributeName": "userId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "email",
            "AttributeType": "S"
          }
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "EmailIndex",
            "KeySchema": [
              {
                "AttributeName": "email",
                "KeyType": "HASH"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "userId",
            "KeyType": "HASH"
          }
        ],
        "PointInTimeRecoverySpecification": {
          "PointInTimeRecoveryEnabled": true
        },
        "TableName": "dojopool-users"
      },
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete",
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/UsersTable/Resource"
      }
    },
    "GameSessionsTable8ACC8A38": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "AttributeDefinitions": [
          {
            "AttributeName": "sessionId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "venueId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "startTime",
            "AttributeType": "S"
          },
          {
            "AttributeName": "playerId",
            "AttributeType": "S"
          }
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "VenueSessionsIndex",
            "KeySchema": [
              {
                "AttributeName": "venueId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "startTime",
                "KeyType": "RANGE"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          },
          {
            "IndexName": "PlayerSessionsIndex",
            "KeySchema": [
              {
                "AttributeName": "playerId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "startTime",
                "KeyType": "RANGE"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "sessionId",
            "KeyType": "HASH"
          },
          {
            "AttributeName": "venueId",
            "KeyType": "RANGE"
          }
        ],
        "PointInTimeRecoverySpecification": {
          "PointInTimeRecoveryEnabled": true
        },
        "TableName": "dojopool-game-sessions"
      },
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete",
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/GameSessionsTable/Resource"
      }
    },
    "TournamentsTable0663457C": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "AttributeDefinitions": [
          {
            "AttributeName": "tournamentId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "venueId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "startDate",
            "AttributeType": "S"
          }
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "VenueTournamentsIndex",
            "KeySchema": [
              {
                "AttributeName": "venueId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "startDate",
                "KeyType": "RANGE"
              }
            ],
            "Projection": {
              "ProjectionType": "ALL"
            }
          }
        ],
        "KeySchema": [
          {
            "AttributeName": "tournamentId",
            "KeyType": "HASH"
          },
          {
            "AttributeName": "venueId",
            "KeyType": "RANGE"
          }
        ],
        "PointInTimeRecoverySpecification": {
          "PointInTimeRecoveryEnabled": true
        },
        "TableName": "dojopool-tournaments"
      },
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete",
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/TournamentsTable/Resource"
      }
    },
    "AnalyticsTable3F84C304": {
      "Type": "AWS::DynamoDB::Table",
      "Properties": {
        "AttributeDefinitions": [
          {
            "AttributeName": "venueId",
            "AttributeType": "S"
          },
          {
            "AttributeName": "timestamp",
            "AttributeType": "S"
          }
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "KeySchema": [
          {
            "AttributeName": "venueId",
            "KeyType": "HASH"
          },
          {
            "AttributeName": "timestamp",
            "KeyType": "RANGE"
          }
        ],
        "PointInTimeRecoverySpecification": {
          "PointInTimeRecoveryEnabled": true
        },
        "TableName": "dojopool-analytics"
      },
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete",
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/AnalyticsTable/Resource"
      }
    },
    "VenueAssetsBucketA9779A12": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        },
        "BucketName": "dojopool-venue-assets-558721173871",
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true
        },
        "Tags": [
          {
            "Key": "aws-cdk:auto-delete-objects",
            "Value": "true"
          }
        ],
        "VersioningConfiguration": {
          "Status": "Enabled"
        }
      },
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete",
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueAssetsBucket/Resource"
      }
    },
    "VenueAssetsBucketPolicyDC3FD5EE": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "VenueAssetsBucketA9779A12"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "s3:DeleteObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:PutBucketPolicy"
              ],
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::GetAtt": [
                    "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
                    "Arn"
                  ]
                }
              },
              "Resource": [
                {
                  "Fn::GetAtt": ["VenueAssetsBucketA9779A12", "Arn"]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": ["VenueAssetsBucketA9779A12", "Arn"]
                      },
                      "/*"
                    ]
                  ]
                }
              ]
            },
            {
              "Action": "s3:GetObject",
              "Effect": "Allow",
              "Principal": {
                "CanonicalUser": {
                  "Fn::GetAtt": [
                    "VenueAssetsDistributionOrigin1S3OriginE1C1547C",
                    "S3CanonicalUserId"
                  ]
                }
              },
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    {
                      "Fn::GetAtt": ["VenueAssetsBucketA9779A12", "Arn"]
                    },
                    "/*"
                  ]
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueAssetsBucket/Policy/Resource"
      }
    },
    "VenueAssetsBucketAutoDeleteObjectsCustomResourceEA6AEACE": {
      "Type": "Custom::S3AutoDeleteObjects",
      "Properties": {
        "ServiceToken": {
          "Fn::GetAtt": [
            "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
            "Arn"
          ]
        },
        "BucketName": {
          "Ref": "VenueAssetsBucketA9779A12"
        }
      },
      "DependsOn": ["VenueAssetsBucketPolicyDC3FD5EE"],
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete",
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueAssetsBucket/AutoDeleteObjectsCustomResource/Default"
      }
    },
    "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com"
              }
            }
          ]
        },
        "ManagedPolicyArns": [
          {
            "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role"
      }
    },
    "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "cdk-hnb659fds-assets-558721173871-ap-southeast-2",
          "S3Key": "faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6.zip"
        },
        "Timeout": 900,
        "MemorySize": 128,
        "Handler": "index.handler",
        "Role": {
          "Fn::GetAtt": [
            "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
            "Arn"
          ]
        },
        "Runtime": "nodejs22.x",
        "Description": {
          "Fn::Join": [
            "",
            [
              "Lambda function for auto-deleting objects in ",
              {
                "Ref": "VenueAssetsBucketA9779A12"
              },
              " S3 bucket."
            ]
          ]
        }
      },
      "DependsOn": [
        "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092"
      ],
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler",
        "aws:asset:path": "asset.faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6",
        "aws:asset:property": "Code"
      }
    },
    "VenueAssetsDistributionOrigin1S3OriginE1C1547C": {
      "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
      "Properties": {
        "CloudFrontOriginAccessIdentityConfig": {
          "Comment": "Identity for DojoPoolInfrastructureStackVenueAssetsDistributionOrigin1B128DA8A"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueAssetsDistribution/Origin1/S3Origin/Resource"
      }
    },
    "VenueAssetsDistributionAC1673D1": {
      "Type": "AWS::CloudFront::Distribution",
      "Properties": {
        "DistributionConfig": {
          "CustomErrorResponses": [
            {
              "ErrorCode": 404,
              "ResponseCode": 200,
              "ResponsePagePath": "/index.html"
            }
          ],
          "DefaultCacheBehavior": {
            "AllowedMethods": ["GET", "HEAD"],
            "CachePolicyId": "658327ea-f89d-4fab-a63d-7e88639e58f6",
            "CachedMethods": ["GET", "HEAD"],
            "Compress": true,
            "TargetOriginId": "DojoPoolInfrastructureStackVenueAssetsDistributionOrigin1B128DA8A",
            "ViewerProtocolPolicy": "redirect-to-https"
          },
          "DefaultRootObject": "index.html",
          "Enabled": true,
          "HttpVersion": "http2",
          "IPV6Enabled": true,
          "Origins": [
            {
              "DomainName": {
                "Fn::GetAtt": [
                  "VenueAssetsBucketA9779A12",
                  "RegionalDomainName"
                ]
              },
              "Id": "DojoPoolInfrastructureStackVenueAssetsDistributionOrigin1B128DA8A",
              "S3OriginConfig": {
                "OriginAccessIdentity": {
                  "Fn::Join": [
                    "",
                    [
                      "origin-access-identity/cloudfront/",
                      {
                        "Ref": "VenueAssetsDistributionOrigin1S3OriginE1C1547C"
                      }
                    ]
                  ]
                }
              }
            }
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueAssetsDistribution/Resource"
      }
    },
    "VenueManagementFunctionServiceRole3CA1C813": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
              ]
            ]
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueManagementFunction/ServiceRole/Resource"
      }
    },
    "VenueManagementFunctionServiceRoleDefaultPolicyF6A941A0": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:BatchWriteItem",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DeleteItem",
                "dynamodb:DescribeTable",
                "dynamodb:GetItem",
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
                "dynamodb:PutItem",
                "dynamodb:Query",
                "dynamodb:Scan",
                "dynamodb:UpdateItem"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": ["AnalyticsTable3F84C304", "Arn"]
                },
                {
                  "Fn::GetAtt": ["GameSessionsTable8ACC8A38", "Arn"]
                },
                {
                  "Fn::GetAtt": ["TournamentsTable0663457C", "Arn"]
                },
                {
                  "Fn::GetAtt": ["UsersTable9725E9C8", "Arn"]
                },
                {
                  "Fn::GetAtt": ["VenuesTable2F048723", "Arn"]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": ["GameSessionsTable8ACC8A38", "Arn"]
                      },
                      "/index/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": ["TournamentsTable0663457C", "Arn"]
                      },
                      "/index/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": ["UsersTable9725E9C8", "Arn"]
                      },
                      "/index/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": ["VenuesTable2F048723", "Arn"]
                      },
                      "/index/*"
                    ]
                  ]
                },
                {
                  "Ref": "AWS::NoValue"
                }
              ]
            },
            {
              "Action": [
                "s3:Abort*",
                "s3:DeleteObject*",
                "s3:GetBucket*",
                "s3:GetObject*",
                "s3:List*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": ["VenueAssetsBucketA9779A12", "Arn"]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": ["VenueAssetsBucketA9779A12", "Arn"]
                      },
                      "/*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "VenueManagementFunctionServiceRoleDefaultPolicyF6A941A0",
        "Roles": [
          {
            "Ref": "VenueManagementFunctionServiceRole3CA1C813"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueManagementFunction/ServiceRole/DefaultPolicy/Resource"
      }
    },
    "VenueManagementFunction9E1B8A97": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": "cdk-hnb659fds-assets-558721173871-ap-southeast-2",
          "S3Key": "60f4d5d65e2e7ca123e96726d3033d36c63215c1805c8ae4b513882d482897a5.zip"
        },
        "Environment": {
          "Variables": {
            "VENUES_TABLE": {
              "Ref": "VenuesTable2F048723"
            },
            "USERS_TABLE": {
              "Ref": "UsersTable9725E9C8"
            },
            "GAME_SESSIONS_TABLE": {
              "Ref": "GameSessionsTable8ACC8A38"
            },
            "TOURNAMENTS_TABLE": {
              "Ref": "TournamentsTable0663457C"
            },
            "ANALYTICS_TABLE": {
              "Ref": "AnalyticsTable3F84C304"
            },
            "VENUE_ASSETS_BUCKET": {
              "Ref": "VenueAssetsBucketA9779A12"
            },
            "CLOUDFRONT_DISTRIBUTION": {
              "Ref": "VenueAssetsDistributionAC1673D1"
            }
          }
        },
        "Handler": "venue-management-handler.handler",
        "MemorySize": 512,
        "Role": {
          "Fn::GetAtt": ["VenueManagementFunctionServiceRole3CA1C813", "Arn"]
        },
        "Runtime": "nodejs18.x",
        "Timeout": 30
      },
      "DependsOn": [
        "VenueManagementFunctionServiceRoleDefaultPolicyF6A941A0",
        "VenueManagementFunctionServiceRole3CA1C813"
      ],
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueManagementFunction/Resource",
        "aws:asset:path": "asset.60f4d5d65e2e7ca123e96726d3033d36c63215c1805c8ae4b513882d482897a5",
        "aws:asset:is-bundled": false,
        "aws:asset:property": "Code"
      }
    },
    "VenueManagementFunctionLogGroupAEFA2ED1": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": {
          "Fn::Join": [
            "",
            [
              "/aws/lambda/",
              {
                "Ref": "VenueManagementFunction9E1B8A97"
              }
            ]
          ]
        },
        "RetentionInDays": 731
      },
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain",
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/VenueManagementFunction/LogGroup/Resource"
      }
    },
    "DojoPoolApiA4F564EE": {
      "Type": "AWS::ApiGateway::RestApi",
      "Properties": {
        "Description": "API for DojoPool venue management system",
        "Name": "DojoPool API"
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Resource"
      }
    },
    "DojoPoolApiDeployment488638FE0059f71e8571cc3ac1c11182979e3bd3": {
      "Type": "AWS::ApiGateway::Deployment",
      "Properties": {
        "Description": "API for DojoPool venue management system",
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "DependsOn": [
        "DojoPoolApiOPTIONSFC9E35C8",
        "DojoPoolApivenuesvenueIdanalyticsGET3E8CDF0F",
        "DojoPoolApivenuesvenueIdanalyticsOPTIONS670E40CF",
        "DojoPoolApivenuesvenueIdanalytics68ACA7C3",
        "DojoPoolApivenuesvenueIdDELETE0440A496",
        "DojoPoolApivenuesvenueIdGETB05BA0D0",
        "DojoPoolApivenuesvenueIdOPTIONS9E143AB0",
        "DojoPoolApivenuesvenueIdPUT0145B3BC",
        "DojoPoolApivenuesvenueId2DEC86DB",
        "DojoPoolApivenuesvenueIdtournamentsGET603F5328",
        "DojoPoolApivenuesvenueIdtournamentsOPTIONS31C9CA18",
        "DojoPoolApivenuesvenueIdtournamentsPOSTAEA830D0",
        "DojoPoolApivenuesvenueIdtournaments19B35F58",
        "DojoPoolApivenuesGETD3FF1F99",
        "DojoPoolApivenuesOPTIONS94E318B6",
        "DojoPoolApivenuesPOST270DB705",
        "DojoPoolApivenues96CC6E44"
      ],
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Deployment/Resource",
        "aws:cdk:do-not-refactor": true
      }
    },
    "DojoPoolApiDeploymentStageprod9E5E5F31": {
      "Type": "AWS::ApiGateway::Stage",
      "Properties": {
        "DeploymentId": {
          "Ref": "DojoPoolApiDeployment488638FE0059f71e8571cc3ac1c11182979e3bd3"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        },
        "StageName": "prod"
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/DeploymentStage.prod/Resource"
      }
    },
    "DojoPoolApiOPTIONSFC9E35C8": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
              },
              "StatusCode": "204"
            }
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }"
          },
          "Type": "MOCK"
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "StatusCode": "204"
          }
        ],
        "ResourceId": {
          "Fn::GetAtt": ["DojoPoolApiA4F564EE", "RootResourceId"]
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/OPTIONS/Resource"
      }
    },
    "DojoPoolApivenues96CC6E44": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": ["DojoPoolApiA4F564EE", "RootResourceId"]
        },
        "PathPart": "venues",
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/Resource"
      }
    },
    "DojoPoolApivenuesOPTIONS94E318B6": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
              },
              "StatusCode": "204"
            }
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }"
          },
          "Type": "MOCK"
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "StatusCode": "204"
          }
        ],
        "ResourceId": {
          "Ref": "DojoPoolApivenues96CC6E44"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/OPTIONS/Resource"
      }
    },
    "DojoPoolApivenuesGETApiPermissionDojoPoolInfrastructureStackDojoPoolApi464CD4E5GETvenuesB08870BD": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/",
              {
                "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
              },
              "/GET/venues"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/GET/ApiPermission.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.GET..venues"
      }
    },
    "DojoPoolApivenuesGETApiPermissionTestDojoPoolInfrastructureStackDojoPoolApi464CD4E5GETvenuesCADEDAB1": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/test-invoke-stage/GET/venues"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/GET/ApiPermission.Test.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.GET..venues"
      }
    },
    "DojoPoolApivenuesGETD3FF1F99": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
                },
                "/invocations"
              ]
            ]
          }
        },
        "ResourceId": {
          "Ref": "DojoPoolApivenues96CC6E44"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/GET/Resource"
      }
    },
    "DojoPoolApivenuesPOSTApiPermissionDojoPoolInfrastructureStackDojoPoolApi464CD4E5POSTvenues5BD55733": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/",
              {
                "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
              },
              "/POST/venues"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/POST/ApiPermission.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.POST..venues"
      }
    },
    "DojoPoolApivenuesPOSTApiPermissionTestDojoPoolInfrastructureStackDojoPoolApi464CD4E5POSTvenuesE9D997CC": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/test-invoke-stage/POST/venues"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/POST/ApiPermission.Test.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.POST..venues"
      }
    },
    "DojoPoolApivenuesPOST270DB705": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
                },
                "/invocations"
              ]
            ]
          }
        },
        "ResourceId": {
          "Ref": "DojoPoolApivenues96CC6E44"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/POST/Resource"
      }
    },
    "DojoPoolApivenuesvenueId2DEC86DB": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "DojoPoolApivenues96CC6E44"
        },
        "PathPart": "{venueId}",
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdOPTIONS9E143AB0": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
              },
              "StatusCode": "204"
            }
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }"
          },
          "Type": "MOCK"
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "StatusCode": "204"
          }
        ],
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueId2DEC86DB"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/OPTIONS/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdGETApiPermissionDojoPoolInfrastructureStackDojoPoolApi464CD4E5GETvenuesvenueId83F19A89": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/",
              {
                "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
              },
              "/GET/venues/*"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/GET/ApiPermission.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.GET..venues.{venueId}"
      }
    },
    "DojoPoolApivenuesvenueIdGETApiPermissionTestDojoPoolInfrastructureStackDojoPoolApi464CD4E5GETvenuesvenueIdAF694B93": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/test-invoke-stage/GET/venues/*"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/GET/ApiPermission.Test.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.GET..venues.{venueId}"
      }
    },
    "DojoPoolApivenuesvenueIdGETB05BA0D0": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
                },
                "/invocations"
              ]
            ]
          }
        },
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueId2DEC86DB"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/GET/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdPUTApiPermissionDojoPoolInfrastructureStackDojoPoolApi464CD4E5PUTvenuesvenueId72183CCC": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/",
              {
                "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
              },
              "/PUT/venues/*"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/PUT/ApiPermission.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.PUT..venues.{venueId}"
      }
    },
    "DojoPoolApivenuesvenueIdPUTApiPermissionTestDojoPoolInfrastructureStackDojoPoolApi464CD4E5PUTvenuesvenueIdEDE233F8": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/test-invoke-stage/PUT/venues/*"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/PUT/ApiPermission.Test.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.PUT..venues.{venueId}"
      }
    },
    "DojoPoolApivenuesvenueIdPUT0145B3BC": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "PUT",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
                },
                "/invocations"
              ]
            ]
          }
        },
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueId2DEC86DB"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/PUT/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdDELETEApiPermissionDojoPoolInfrastructureStackDojoPoolApi464CD4E5DELETEvenuesvenueIdDAD36554": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/",
              {
                "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
              },
              "/DELETE/venues/*"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/DELETE/ApiPermission.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.DELETE..venues.{venueId}"
      }
    },
    "DojoPoolApivenuesvenueIdDELETEApiPermissionTestDojoPoolInfrastructureStackDojoPoolApi464CD4E5DELETEvenuesvenueId8071738F": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/test-invoke-stage/DELETE/venues/*"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/DELETE/ApiPermission.Test.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.DELETE..venues.{venueId}"
      }
    },
    "DojoPoolApivenuesvenueIdDELETE0440A496": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "DELETE",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
                },
                "/invocations"
              ]
            ]
          }
        },
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueId2DEC86DB"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/DELETE/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdanalytics68ACA7C3": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "DojoPoolApivenuesvenueId2DEC86DB"
        },
        "PathPart": "analytics",
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/analytics/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdanalyticsOPTIONS670E40CF": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
              },
              "StatusCode": "204"
            }
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }"
          },
          "Type": "MOCK"
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "StatusCode": "204"
          }
        ],
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueIdanalytics68ACA7C3"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/analytics/OPTIONS/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdanalyticsGETApiPermissionDojoPoolInfrastructureStackDojoPoolApi464CD4E5GETvenuesvenueIdanalyticsEF76E8FA": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/",
              {
                "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
              },
              "/GET/venues/*/analytics"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/analytics/GET/ApiPermission.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.GET..venues.{venueId}.analytics"
      }
    },
    "DojoPoolApivenuesvenueIdanalyticsGETApiPermissionTestDojoPoolInfrastructureStackDojoPoolApi464CD4E5GETvenuesvenueIdanalytics31B7870D": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/test-invoke-stage/GET/venues/*/analytics"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/analytics/GET/ApiPermission.Test.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.GET..venues.{venueId}.analytics"
      }
    },
    "DojoPoolApivenuesvenueIdanalyticsGET3E8CDF0F": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
                },
                "/invocations"
              ]
            ]
          }
        },
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueIdanalytics68ACA7C3"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/analytics/GET/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdtournaments19B35F58": {
      "Type": "AWS::ApiGateway::Resource",
      "Properties": {
        "ParentId": {
          "Ref": "DojoPoolApivenuesvenueId2DEC86DB"
        },
        "PathPart": "tournaments",
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/tournaments/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdtournamentsOPTIONS31C9CA18": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
              },
              "StatusCode": "204"
            }
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }"
          },
          "Type": "MOCK"
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Origin": true,
              "method.response.header.Access-Control-Allow-Methods": true
            },
            "StatusCode": "204"
          }
        ],
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueIdtournaments19B35F58"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/tournaments/OPTIONS/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdtournamentsGETApiPermissionDojoPoolInfrastructureStackDojoPoolApi464CD4E5GETvenuesvenueIdtournamentsF4722B03": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/",
              {
                "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
              },
              "/GET/venues/*/tournaments"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/tournaments/GET/ApiPermission.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.GET..venues.{venueId}.tournaments"
      }
    },
    "DojoPoolApivenuesvenueIdtournamentsGETApiPermissionTestDojoPoolInfrastructureStackDojoPoolApi464CD4E5GETvenuesvenueIdtournamentsA8FDD3E8": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/test-invoke-stage/GET/venues/*/tournaments"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/tournaments/GET/ApiPermission.Test.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.GET..venues.{venueId}.tournaments"
      }
    },
    "DojoPoolApivenuesvenueIdtournamentsGET603F5328": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
                },
                "/invocations"
              ]
            ]
          }
        },
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueIdtournaments19B35F58"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/tournaments/GET/Resource"
      }
    },
    "DojoPoolApivenuesvenueIdtournamentsPOSTApiPermissionDojoPoolInfrastructureStackDojoPoolApi464CD4E5POSTvenuesvenueIdtournamentsC13C21CA": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/",
              {
                "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
              },
              "/POST/venues/*/tournaments"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/tournaments/POST/ApiPermission.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.POST..venues.{venueId}.tournaments"
      }
    },
    "DojoPoolApivenuesvenueIdtournamentsPOSTApiPermissionTestDojoPoolInfrastructureStackDojoPoolApi464CD4E5POSTvenuesvenueIdtournaments3B8E61FE": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:aws:execute-api:ap-southeast-2:558721173871:",
              {
                "Ref": "DojoPoolApiA4F564EE"
              },
              "/test-invoke-stage/POST/venues/*/tournaments"
            ]
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/tournaments/POST/ApiPermission.Test.DojoPoolInfrastructureStackDojoPoolApi464CD4E5.POST..venues.{venueId}.tournaments"
      }
    },
    "DojoPoolApivenuesvenueIdtournamentsPOSTAEA830D0": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "POST",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": ["VenueManagementFunction9E1B8A97", "Arn"]
                },
                "/invocations"
              ]
            ]
          }
        },
        "ResourceId": {
          "Ref": "DojoPoolApivenuesvenueIdtournaments19B35F58"
        },
        "RestApiId": {
          "Ref": "DojoPoolApiA4F564EE"
        }
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/DojoPoolApi/Default/venues/{venueId}/tournaments/POST/Resource"
      }
    },
    "CDKMetadata": {
      "Type": "AWS::CDK::Metadata",
      "Properties": {
        "Analytics": "v2:deflate64:H4sIAAAAAAAA/+1Y3W/bNhD/W8rHgtG6tNhD3pyPpkGTRrO9h8EwApq8yGwonkaenKmC/veB1IfldAnQAUuQzQ+GqPsg737345HyYXL47pfk3Rtx7w+kujswepXUMxLyjot7f1Oryooc1Sqp52JlYFEzCs8vIgd2xN4yzgrhSJNG+xkqdlQzu1VRVYThjDWceXT0tMVKG6NtdoUqiNLJ7zfp2fRmevbrb2ezOePMQY4bYVI0WlbsiCnw5LAKIaC2dGHnOocpSNyAq9gRuRIaXjOh1LnBlTAzkGiVcNWFVfAnO1rUTIfRj+dSOPwKMtjNW+nk8pI1y+df7R/W4j+B9J6Hr56H/5NavCp0lvzk1sZe33D/PqmPS3kHtKjZKg5GaWzAeY0WVOvJGVjpqiIkFgJ8f3M1+TI5PztlnK0Myru0XBktJ1KC990UjwcoSsJTMEBwvQq4+nF4bUy8fbTOQ4Bx5rFZq++Mj4WHxbLh0mCpbh1aSupT7cnpVRkCX9RMwa0oDR3DWmw0ugA/Op1p26et4R5c6pBQ4jZ0B0o7kHRAeLAmKnxIwhi8B3UFtEbV5yyFXO/KGt4vOkWkNt/OGJxDNwVfoPXgIz/D5DMSVG5BbNWfHlOkIoNU0LqDplny65hQW4oLBZY0VYu6Re0kQPMxQPN3VsFiDFjDjchXSiT1x9LKDkJXWtIDT9bCKgOuT78la0zObrRDm4Pt0w1eWPZvOeToqpn+Bh1MceOejb0W0fAtW74yZUS6RyyMU3C59j4iqkWe1FOMty3hfZmDOo5toHDaSl0IM5ESywG11iY4TGS3+yKpcmFFBipSVHfsGcuqibM9J9po55j2S/TEDrSIWiIh1xfWaAuDbkj0SeXT876ENsIfAONd9wg49mnMMWi+y+57sVJhu0Gord9Z9lnFMZc2jdCxb4T3QD6ZhAc3mPmkvsTs3GFZLGpmuuHQx1v/3qLhotCZILgXVVJPwdOk0GFHt6NR91fgpdPFwLehh52g86mDW6OzNV1HAx/IG5th21L6BhVFu90xij6BUOC65tgVqw2An0JhsAr5x1b9MAZR6KH5kdB2a+7HPWSOl5hpKcyFesCXvfxl5LHI22rxGYkMYol70YitUcmn4LF0EuKZHjYlb6nU0jWq+hOIqGh1nUBbgsyJEXFwRNSS1uj0N3C7bxe9dy8So9tebLii0J+hmsIfpXbhWnQrjIfH7MP5FkLaPd19PMBPtofk9hB3IgcatsWy6bC82pnlRyfhe7CeC6yu/bzoDPuCvbKC7Uv+ykq+h/vZ90e8E7QOw6VgUYe/WbZfloWgdSocDWv+S9r+shqDaJptPN2n38Pfkp+UnjAf2+3M8UCfOtxoBS5ceni844fLkLZZ8LkuqSip4RYVJF/9T5vDD8mH5Oc3X73WB91HeTJtn38Bd6YcnPkXAAA="
      },
      "Metadata": {
        "aws:cdk:path": "DojoPoolInfrastructureStack/CDKMetadata/Default"
      }
    }
  },
  "Outputs": {
    "DojoPoolApiEndpointF8A56013": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "DojoPoolApiA4F564EE"
            },
            ".execute-api.ap-southeast-2.",
            {
              "Ref": "AWS::URLSuffix"
            },
            "/",
            {
              "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
            },
            "/"
          ]
        ]
      }
    },
    "VenuesTableName": {
      "Description": "DynamoDB table for venues",
      "Value": {
        "Ref": "VenuesTable2F048723"
      }
    },
    "UsersTableName": {
      "Description": "DynamoDB table for users",
      "Value": {
        "Ref": "UsersTable9725E9C8"
      }
    },
    "GameSessionsTableName": {
      "Description": "DynamoDB table for game sessions",
      "Value": {
        "Ref": "GameSessionsTable8ACC8A38"
      }
    },
    "TournamentsTableName": {
      "Description": "DynamoDB table for tournaments",
      "Value": {
        "Ref": "TournamentsTable0663457C"
      }
    },
    "AnalyticsTableName": {
      "Description": "DynamoDB table for analytics",
      "Value": {
        "Ref": "AnalyticsTable3F84C304"
      }
    },
    "VenueAssetsBucketName": {
      "Description": "S3 bucket for venue assets",
      "Value": {
        "Ref": "VenueAssetsBucketA9779A12"
      }
    },
    "CloudFrontDistributionId": {
      "Description": "CloudFront distribution for venue assets",
      "Value": {
        "Ref": "VenueAssetsDistributionAC1673D1"
      }
    },
    "ApiGatewayUrl": {
      "Description": "API Gateway URL",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "DojoPoolApiA4F564EE"
            },
            ".execute-api.ap-southeast-2.",
            {
              "Ref": "AWS::URLSuffix"
            },
            "/",
            {
              "Ref": "DojoPoolApiDeploymentStageprod9E5E5F31"
            },
            "/"
          ]
        ]
      }
    }
  },
  "Parameters": {
    "BootstrapVersion": {
      "Type": "AWS::SSM::Parameter::Value<String>",
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
    }
  },
  "Rules": {
    "CheckBootstrapVersion": {
      "Assertions": [
        {
          "Assert": {
            "Fn::Not": [
              {
                "Fn::Contains": [
                  ["1", "2", "3", "4", "5"],
                  {
                    "Ref": "BootstrapVersion"
                  }
                ]
              }
            ]
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
        }
      ]
    }
  }
}
