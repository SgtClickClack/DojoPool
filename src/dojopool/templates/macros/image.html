{% macro responsive_image(src, alt, sizes=None, lazy=True, class="") %}
<picture>
    {# AVIF source #}
    <source type="image/avif" srcset="{{ src | replace(src.split('.')[-1], 'avif') }}" {% if sizes %}sizes="{{ sizes }}"
        {% endif %}>
    {# WebP source #}
    <source type="image/webp" srcset="{{ src | replace(src.split('.')[-1], 'webp') }}" {% if sizes %}sizes="{{ sizes }}"
        {% endif %}>
    {# Original source (JPEG/PNG) #}
    <img src="{{ src }}" alt="{{ alt }}" {% if lazy %}loading="lazy" {% endif %} {% if class %}class="{{ class }}" {%
        endif %} {% if sizes %}sizes="{{ sizes }}" {% endif %}>
</picture>
{% endmacro %}

{% macro responsive_image_set(src_set, alt, sizes=None, lazy=True, class="") %}
<picture>
    {# AVIF sources #}
    <source type="image/avif"
        srcset="{% for size, path in src_set.items() %}{{ path | replace(path.split('.')[-1], 'avif') }} {{ size }}w{% if not loop.last %}, {% endif %}{% endfor %}"
        {% if sizes %}sizes="{{ sizes }}" {% endif %}>
    {# WebP sources #}
    <source type="image/webp"
        srcset="{% for size, path in src_set.items() %}{{ path | replace(path.split('.')[-1], 'webp') }} {{ size }}w{% if not loop.last %}, {% endif %}{% endfor %}"
        {% if sizes %}sizes="{{ sizes }}" {% endif %}>
    {# Original sources (JPEG/PNG) #}
    <img src="{{ src_set.values() | list | first }}"
        srcset="{% for size, path in src_set.items() %}{{ path }} {{ size }}w{% if not loop.last %}, {% endif %}{% endfor %}"
        alt="{{ alt }}" {% if lazy %}loading="lazy" {% endif %} {% if class %}class="{{ class }}" {% endif %} {% if
        sizes %}sizes="{{ sizes }}" {% endif %}>
</picture>
{% endmacro %}