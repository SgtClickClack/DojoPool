server {
    listen 8000;
    server_name localhost;

    location /health {
        access_log off;
        add_header Content-Type text/plain;
        return 200 'OK';
    }

    location /api/auth/login {
        add_header Content-Type application/json;
        if ($request_method = 'POST') {
            return 200 '{"token": "test-token"}';
        }
        return 405 '{"error": "Method not allowed"}';
    }

    location /ws/ {
        if ($http_upgrade = "websocket") {
            add_header Upgrade $http_upgrade;
            add_header Connection "Upgrade";
            return 101;
        }
        return 400 "Bad Request";
    }

    location / {
        return 404 '{"error": "Not found"}';
    }
}
